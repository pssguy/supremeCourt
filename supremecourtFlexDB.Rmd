---
title: "US Supreme Court Judges"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
runtime: shiny    
---

```{r setup, include=FALSE}
library(flexdashboard)
library(timevis)
library(plotly)
library(readxl)
library(stringr)
library(readr)
library(dplyr)




## import pre-processed info

df <- read_csv("data/timelineData.csv")
byState <- read_csv("data/mapData.csv")
 


l <- list(color = toRGB("black"), width = 1)
# specify some map projection/options
g <- list(
  scope = 'usa',
  projection = list(type = 'albers usa'),
  showlakes = TRUE,
  lakecolor = toRGB('blue')
)


```

Background {.sidebar data-width=355}
-------------------------------------

```{r info}

includeMarkdown("info.md")


```


Row {.tabset .tabset-fade}
-----------------------------------------------------------------------


### Timeline * indicates Chief Justice Color represents political affiliation - Zoom and Pan as required. Hover boxes for full name

```{r timeline}
 # df %>% 
 #    select(content=surname,start=dateserb,end=datesere,title=name,style=style) %>% 
 #    timevis()

output$timeline <- renderTimevis({
  
 df %>%
    select(content=surname,start=dateserb,end=datesere,title=name,style=style,id = id) %>% 
   timevis() #%>% 
   # addCustomTime("1969/06/23",100)
  
})


# observe({
#     centerTime("timeline", "1950-01-23")
#   })
# 
#  addCustomTime("timelineInteractive", "2016-01-17", randomID())

 timevisOutput("timeline")

```

### Map


```{r map}

plot_ly(byState, z = n, locations = stateID, type = 'choropleth',
        locationmode = 'USA-states', color = n, colors = 'Reds',
        marker = list(line = l), colorbar = list(title = "Count")) %>%
  layout(title = 'US Supreme Court Judges by State of Birth (6 immigrants)', geo = g)


```

### Downloadable Data used in analysis. Original database includes many more variables


```{r data}

df %>%
  DT::datatable(
  class = 'compact stripe hover row-border order-column',
  rownames = FALSE,
   extensions = 'Buttons',
  options = list(
  paging = TRUE,
  searching = FALSE,
  info = FALSE,
 
  dom = 'Bfrtip',
  buttons = c('copy', 'csv', 'excel', 'pdf', 'print')
  )
  )


```

